---
title: Proxy Servery
description: Jak propojit v칤ce server콢 pomoc칤 Velocity nebo BungeeCord.
---


import {CardGrid, LinkCard, Steps, TabItem, Tabs, FileTree} from '@astrojs/starlight/components';

Proxy server je speci치ln칤 typ serveru, kter칳 slou쮂 jako "br치na". Umo쮄갓je propojit v칤ce Minecraft server콢 (Lobby, Survival, Skyblock) do jedn칠 s칤t캩, tak쬰 se hr치캜i mohou mezi nimi p콏ep칤nat p콏칤kazem `/server` nebo p콏es port치ly, ani by se museli odpojovat.

```mermaid
graph TD;
    Hrac-->Velocity;
    Velocity-->Lobby;
    Velocity-->Survival;
```

## V칳b캩r Proxy softwaru

Doba pokro캜ila a star칠 콏e코en칤 u nesta캜칤. Zde je p콏ehled dostupn칳ch mo쬹ost칤.

<CardGrid>
    <LinkCard title="Velocity"
              description="Modern칤, bezpe캜n치 a extr칠mn캩 v칳konn치 proxy. Jedin치 spr치vn치 volba pro dne코n칤 servery."
              href="https://papermc.io/downloads/velocity" target="_blank" icon="rocket"/>
    <LinkCard title="BungeeCord"
              description="Zastaral치 legenda. M칠n캩 bezpe캜n치 a n치ro캜n캩j코칤 na v칳kon. Pou쮂셨ej pouze pokud mus칤코."
              href="https://ci.md-5.net/job/BungeeCord/lastSuccessfulBuild/" target="_blank" icon="warning"/>
</CardGrid>

:::danger[Nepou쮂셨ej mrtv칠 projekty]
Projekt **Waterfall** je ofici치ln캩 ukon캜en칳 (End of Life) a nedost치v치 쮂멳n칠 aktualizace. Nepou쮂셨ej ho, neobsahuje bezpe캜nostn칤 z치platy. Pokud hled치코 n치hradu za Waterfall, p콏ejdi na **Velocity**.
:::

## Hardwarov칠 po쬬davky

Proxy servery pouze p콏epos칤laj칤 pakety, nepo캜칤taj칤 fyziku sv캩ta ani AI monster. Proto jsou velmi nen치ro캜n칠.
* **RAM:** Pro v캩t코inu s칤t칤 (do 500 hr치캜콢) bohat캩 sta캜칤 **512 MB - 1 GB RAM**.
* **CPU:** Minim치ln칤 z치t캩.
* **Port:** Doporu캜ujeme, aby proxy b캩쬰la na portu **25565** (v칳choz칤 MC port).

---

## Instalace a Nastaven칤

Vyber si software, kter칳 chce코 pou쮂셦.

<Tabs>
    <TabItem label="游 Velocity (Doporu캜eno)">
        Velocity m치 p콏칤mou podporu pro Paper, Sponge, Fabric i Forge (1.7.2 - 1.21+). Pou쮂셨치 **Modern Forwarding**, co
        je bezpe캜n캩j코칤 a rychlej코칤 ne star칳 Bungee protokol.

        <Steps>

            1. **Sta쬰n칤 a P콏칤prava**

                St치hni nejnov캩j코칤 [Velocity](https://papermc.io/downloads/velocity). Ujisti se, 쬰 m치코 nainstalovanou **Javu
                21**.
                Nahraj soubor `velocity.jar` na server a spus콘 ho.

            2. **Nastaven칤 Proxy (velocity.toml)**

                Po prvn칤m startu se vytvo콏칤 soubor `velocity.toml`. Otev콏i ho a uprav:

                <FileTree>
                - **velocity.toml**
                </FileTree>

                ```toml
                [servers]
                # Nastaven칤 tv칳ch server콢 (N치zev = "IP:PORT")
                lobby = "127.0.0.1:30001"
                survival = "127.0.0.1:30002"

                # Server, na kter칳 se hr치캜 p콏ipoj칤 jako prvn칤
                try = ["lobby"]

                # Po콏ad칤 server콢 pro tab-list (voliteln칠)
                forced-hosts = {}

                [advanced]
                # D콡LE콯IT칄: Povolen칤 modern칤ho forwardingu
                # Zaji코콘uje bezpe캜n칠 p콏ed치n칤 skin콢 a UUID
                player-info-forwarding-mode = "modern"
                forwarding-secret-file = "forwarding.secret"
                ```

                *Soubor `forwarding.secret` se vygeneruje automaticky. Jeho obsah bude코 pot콏ebovat.*

                <FileTree>
                - **forwarding.secret**
                </FileTree>

            3. **Nastaven칤 Backend server콢 (Paper)**

                Na ka쬯칠m hern칤m serveru (Lobby, Survival...) mus칤코 upravit konfiguraci.

                **A. server.properties**

                <FileTree>
                - **server.properties**
                </FileTree>

                ```properties
                online-mode=false
                ```

                **B. config/paper-global.yml**
                Najdi sekci `proxies` a nastav ji pro Velocity:

                <FileTree>
                - config/
                  - **paper-global.yml**
                </FileTree>

                ```yaml
                proxies:
                velocity:
                enabled: true
                online-mode: true # P콏칤padn캩 false, pokud m치코 server i pro warez hr치캜e
                secret: "zde-vloz-obsah-souboru-forwarding-secret-z-proxy"
                ```
                *Pozor: V `spigot.yml` mus칤 b칳t `bungeecord: false`!*

            4. **Restart**

                Restartuj proxy i v코echny hern칤 servery.

        </Steps>

        **Startovac칤 p콏칤kaz pro Velocity:**
        ```bash
        java -Xms1G -Xmx1G -XX:+UseG1GC -XX:G1HeapRegionSize=4M -XX:+UnlockExperimentalVMOptions
        -XX:+ParallelRefProcEnabled -XX:MaxInlineLevel=15 -jar velocity.jar

        ```

    </TabItem>

    <TabItem label="游깱 BungeeCord (Legacy)">
        Pokud z n캩jak칠ho d콢vodu nem콢쬰코 pou쮂셦 Velocity.

        <Steps>

            1. **Instalace**
                St치hni [BungeeCord](https://ci.md-5.net/job/BungeeCord/) a spus콘 ho (vy쬬duje Javu podle verze MC, pro 1.21
                je to Java 21).
            2. **Nastaven칤 Proxy (config.yml)**
                Otev콏i `config.yml` a nastav:

                <FileTree>
                - **config.yml**
                </FileTree>

                ```yaml
                # Povolen칤 p콏ed치v치n칤 UUID a IP adres
                ip_forward: true

                servers:
                lobby:
                motd: '&1Lobby Server'
                address: 127.0.0.1:30001
                restricted: false
                survival:
                motd: '&1Survival Server'
                address: 127.0.0.1:30002
                restricted: false

                priorities:
                - lobby

                ```


            3. **Nastaven칤 Backend server콢**
                Na ka쬯칠m hern칤m serveru uprav:
                **A. server.properties**

                <FileTree>
                - **server.properties**
                </FileTree>

                ```properties
                online-mode=false

                ```


                **B. spigot.yml**

                <FileTree>
                - **spigot.yml**
                </FileTree>

                ```yaml
                settings:
                bungeecord: true

                ```


            4. **Zabezpe캜en칤 (BungeeGuard)**
                Samotn칳 BungeeCord je **nebezpe캜n칳**, proto쬰 kdokoli, kdo zn치 port tv칠ho Survival serveru, se na n캩j m콢쬰
                p콏ipojit p콏칤mo a obej칤t p콏ihl치코en칤.
                * Nainstaluj plugin **[BungeeGuard](https://www.spigotmc.org/resources/bungeeguard.79601/)** na Proxy i na
                v코echny hern칤 servery.
                * Nastav token v `config.yml` (BungeeGuard) tak, aby byl shodn칳 na proxy i serverech.


        </Steps>
    </TabItem>
</Tabs>

## Firewall (Maxim치ln칤 bezpe캜nost)

I kdy nastav칤코 `forwarding secret` nebo BungeeGuard, nejlep코칤 ochranou je **Firewall**.
Pokud m치코 servery na VPS/Dedikovan칠m serveru, nastav Firewall tak, aby hern칤 servery (porty 30001, 30002...) p콏ij칤maly spojen칤 **pouze z lok치ln칤 adresy** (127.0.0.1).

T칤m zajist칤코, 쬰 jedin치 cesta dovnit콏 vede p콏es Proxy (port 25565).

:::caution[Pozor na porty]
P콏i nastavov치n칤 firewallu (UFW/IPTables) si omylem nezablokuj SSH (port 22) nebo port Proxy (25565)!
:::